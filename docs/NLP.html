<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>NLP</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/sandstone.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet" />
<script src="site_libs/pagedtable-1.1/js/pagedtable.js"></script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { font-weight: bold; } /* Alert */
code span.an { font-style: italic; } /* Annotation */
code span.cf { font-weight: bold; } /* ControlFlow */
code span.co { font-style: italic; } /* Comment */
code span.cv { font-style: italic; } /* CommentVar */
code span.do { font-style: italic; } /* Documentation */
code span.dt { text-decoration: underline; } /* DataType */
code span.er { font-weight: bold; } /* Error */
code span.in { font-style: italic; } /* Information */
code span.kw { font-weight: bold; } /* Keyword */
code span.pp { font-weight: bold; } /* Preprocessor */
code span.wa { font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>


<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>




<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 61px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 66px;
  margin-top: -66px;
}
.section h2 {
  padding-top: 66px;
  margin-top: -66px;
}
.section h3 {
  padding-top: 66px;
  margin-top: -66px;
}
.section h4 {
  padding-top: 66px;
  margin-top: -66px;
}
.section h5 {
  padding-top: 66px;
  margin-top: -66px;
}
.section h6 {
  padding-top: 66px;
  margin-top: -66px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}

.tocify-subheader {
  display: inline;
}
.tocify-subheader .tocify-item {
  font-size: 0.95em;
}

</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Help in Yelp</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="EDA.html">EDA</a>
</li>
<li>
  <a href="NLP.html">NLP</a>
</li>
<li>
  <a href="GUI.html">GUI</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">




</div>


<p>     </p>
<p>We use Review.json dataset for performing Natural language processing, which extracts and summarizes information for textual corpus. Our idea is to build a model which analyzes tge sentiment of the user written reviews and classifies them into negative or positive review. The model will be used in our GUI, where a user selects a particular restaurant category for the given city and state. The restaurants of that paritcular type will have user reviews which we then feed into our model to get there classification into positive/ negative. We then use this information into building our rule-based decision system. It is descrbed in detail in GUI section. We use Topic Modelling, one of the tasks of NLP to build our classification model.</p>
<blockquote>
<blockquote>
<p><strong>Topic Modeling</strong>: The NLP task of identifying automatically identifying major themes in a text, usually by identifying informative words.</p>
</blockquote>
</blockquote>
<p>The Review.json contains following attributes:</p>
<ul>
<li>Review Id</li>
<li>User Id</li>
<li>Business Id, which maps to businesses in business.json</li>
<li>star rating</li>
<li>Review in free form text</li>
<li>votes on the reviews</li>
</ul>
<div id="preprocessing" class="section level4">
<h4><span class="header">Preprocessing</span></h4>
<p>We preprocess the text to remove many characters, punctuations and white spaces which doesn’t convey much meaning, remove website links and non english language text. We also remove stop words, perform stemming and convert text into lower case.</p>
<p>And at last we add a Y-label, a label attribute to dataset which labels each review (row of text) as positive or negative. This manual labeling was done heuristically based on human ability to recognize the sentiment. We analysed the review language and their respective star rating and it was deduced that reviews with less than or equal to 2 stars were negative in nature and reviews with more than 2 stars were positive. We tested our deduction on many different reviews belonging to different businesses spreaded across different states, cities and countries to check for its general performance, before including in our work.</p>
<blockquote>
<blockquote>
<p><strong>Stop words</strong>: The words and phrases which occur frequently in the language but doesn’t acount to any information. Words such as ‘is’, ‘the’, ‘of’ ,‘and’ are some of the examples of stop words.  <br />
<strong>Stemming</strong>: Removing all the inflection expression such as prefix and suffix from words. For instance, the root form of “horses”, “horse”, and “horsing [around]” is the same word: “horse”. For some NLP tasks, we want to count all of these words as the same word.</p>
</blockquote>
</blockquote>
<p> </p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1">df&lt;-<span class="kw">transform</span>(df, <span class="dt">text =</span> <span class="kw">as.character</span>(text)) <span class="co">#reviews column is of character type</span></a>
<a class="sourceLine" id="cb1-2" title="2"><span class="co">#Detect non english text</span></a>
<a class="sourceLine" id="cb1-3" title="3">non_alpha &lt;-<span class="st"> </span>(<span class="kw">unlist</span>(<span class="kw">str_match_all</span>(df<span class="op">$</span>text, <span class="st">&quot;[^A-Z-^a-z]&quot;</span>)))</a>
<a class="sourceLine" id="cb1-4" title="4"><span class="kw">unique</span>(non_alpha)</a>
<a class="sourceLine" id="cb1-5" title="5"></a>
<a class="sourceLine" id="cb1-6" title="6"></a>
<a class="sourceLine" id="cb1-7" title="7"><span class="co">#######Cleaning the text########</span></a>
<a class="sourceLine" id="cb1-8" title="8">df<span class="op">$</span>text&lt;-<span class="kw">lapply</span>(df<span class="op">$</span>text, <span class="cf">function</span>(x) <span class="kw">gsub</span>(<span class="st">&quot;[^\u0001-\u007F]+&quot;</span>,<span class="st">&quot;&quot;</span>, x)) <span class="co">#remove text which is not english</span></a>
<a class="sourceLine" id="cb1-9" title="9">df<span class="op">$</span>text &lt;-<span class="kw">gsub</span>(<span class="st">&#39;http[[:alnum:]]*&#39;</span>,<span class="st">&#39; &#39;</span>,df<span class="op">$</span>text) <span class="co">#remove website links</span></a>
<a class="sourceLine" id="cb1-10" title="10">df<span class="op">$</span>text &lt;-<span class="st"> </span><span class="kw">tolower</span>(df<span class="op">$</span>text) <span class="co">#make the whole text to lower</span></a>
<a class="sourceLine" id="cb1-11" title="11">df<span class="op">$</span>text &lt;-<span class="st"> </span><span class="kw">removeNumbers</span>(df<span class="op">$</span>text) <span class="co">#remove numbers from review</span></a>
<a class="sourceLine" id="cb1-12" title="12">df<span class="op">$</span>text &lt;-<span class="kw">gsub</span>(<span class="st">&#39;[[:punct:] ]+&#39;</span>,<span class="st">&#39; &#39;</span>,df<span class="op">$</span>text) <span class="co">#remove punctuation</span></a>
<a class="sourceLine" id="cb1-13" title="13">df<span class="op">$</span>text &lt;-<span class="st"> </span><span class="kw">stripWhitespace</span>(df<span class="op">$</span>text) <span class="co">#remove extra whitestrip</span></a>
<a class="sourceLine" id="cb1-14" title="14">df<span class="op">$</span>text &lt;-<span class="st"> </span><span class="kw">removeWords</span>(df<span class="op">$</span>text, <span class="kw">stopwords</span>(<span class="st">&quot;english&quot;</span>)) <span class="co">#stop word removal</span></a>
<a class="sourceLine" id="cb1-15" title="15">df<span class="op">$</span>text &lt;-SnowballC<span class="op">::</span><span class="kw">wordStem</span>(df<span class="op">$</span>text, <span class="dt">language =</span> <span class="st">&#39;en&#39;</span>) <span class="co">#stemming</span></a>
<a class="sourceLine" id="cb1-16" title="16"></a>
<a class="sourceLine" id="cb1-17" title="17"><span class="co">#Detect non english text</span></a>
<a class="sourceLine" id="cb1-18" title="18">non_alpha &lt;-<span class="st"> </span>(<span class="kw">unlist</span>(<span class="kw">str_match_all</span>(df<span class="op">$</span>text, <span class="st">&quot;[^A-Z-^a-z]&quot;</span>)))</a>
<a class="sourceLine" id="cb1-19" title="19"><span class="kw">unique</span>(non_alpha)</a>
<a class="sourceLine" id="cb1-20" title="20"></a>
<a class="sourceLine" id="cb1-21" title="21"><span class="co">####renaming few words#####</span></a>
<a class="sourceLine" id="cb1-22" title="22">df<span class="op">$</span>text &lt;-<span class="st"> </span>df<span class="op">$</span>text <span class="op">%&gt;%</span><span class="st">    </span><span class="co">#rename few words</span></a>
<a class="sourceLine" id="cb1-23" title="23"><span class="st">  </span><span class="kw">str_replace_all</span>(<span class="st">&quot;don&quot;</span>, <span class="st">&quot; do not &quot;</span>)</a>
<a class="sourceLine" id="cb1-24" title="24">df<span class="op">$</span>text &lt;-<span class="st"> </span>df<span class="op">$</span>text <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb1-25" title="25"><span class="st">  </span><span class="kw">str_replace_all</span>(<span class="st">&quot;didn&quot;</span>, <span class="st">&quot; did not &quot;</span>)</a>
<a class="sourceLine" id="cb1-26" title="26">df<span class="op">$</span>text &lt;-<span class="st"> </span>df<span class="op">$</span>text <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb1-27" title="27"><span class="st">  </span><span class="kw">str_replace_all</span>(<span class="st">&quot;wasn&quot;</span>, <span class="st">&quot; was not &quot;</span>)</a>
<a class="sourceLine" id="cb1-28" title="28"></a>
<a class="sourceLine" id="cb1-29" title="29"></a>
<a class="sourceLine" id="cb1-30" title="30">df<span class="op">$</span>text &lt;-<span class="st"> </span><span class="kw">stripWhitespace</span>(df<span class="op">$</span>text) <span class="co">#remove extra space</span></a>
<a class="sourceLine" id="cb1-31" title="31"></a>
<a class="sourceLine" id="cb1-32" title="32">df<span class="op">$</span>review_sentiment &lt;-<span class="st"> </span><span class="kw">ifelse</span>(df<span class="op">$</span>stars<span class="op">&gt;</span><span class="dv">3</span>, <span class="st">&quot;positive&quot;</span>, <span class="st">&quot;negative&quot;</span>) <span class="co">#label the dataset</span></a>
<a class="sourceLine" id="cb1-33" title="33"></a>
<a class="sourceLine" id="cb1-34" title="34"><span class="co">#custom stop word elimination</span></a>
<a class="sourceLine" id="cb1-35" title="35">stopwords_freq&lt;-<span class="kw">c</span>(<span class="st">&quot;food&quot;</span>, <span class="st">&quot;t&quot;</span>, <span class="st">&quot;s&quot;</span>, <span class="st">&quot;good&quot;</span>, <span class="st">&quot;place&quot;</span> ,<span class="st">&quot;great&quot;</span>, <span class="st">&quot;not&quot;</span>, <span class="st">&quot;service&quot;</span>, <span class="st">&quot;like&quot;</span>, <span class="st">&quot;just&quot;</span>, <span class="st">&quot;time&quot;</span> ,<span class="st">&quot;one&quot;</span>, <span class="st">&quot;back&quot;</span> ,<span class="st">&quot;get&quot;</span>, <span class="st">&quot;go&quot;</span>, <span class="st">&quot;can&quot;</span> ,<span class="st">&quot;do&quot;</span> ,<span class="st">&quot;really&quot;</span>, <span class="st">&quot;will&quot;</span> ,<span class="st">&quot;ordered&quot;</span>, <span class="st">&quot;us&quot;</span> ,<span class="st">&quot;order&quot;</span> ,<span class="st">&quot;restaurant&quot;</span>, <span class="st">&quot;chicken&quot;</span> ,<span class="st">&quot;also&quot;</span>, <span class="st">&quot;got&quot;</span> ,<span class="st">&quot;ve&quot;</span>, <span class="st">&quot;came&quot;</span>, <span class="st">&quot;even&quot;</span>, <span class="st">&quot;menu&quot;</span> ,<span class="st">&quot;re&quot;</span> ,<span class="st">&quot;m&quot;</span>)</a>
<a class="sourceLine" id="cb1-36" title="36">df<span class="op">$</span>text &lt;-<span class="st"> </span><span class="kw">removeWords</span>(df<span class="op">$</span>text, stopwords_freq)</a></code></pre></div>
<p> </p>
</div>
<div id="visualisation" class="section level4">
<h4><span class="header">Visualisation</span></h4>
<p>We use wordcloud and Bi-gram to visualise the most occuring words and their connections with other words in the text.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1">df_cloud&lt;-<span class="kw">freq_terms</span>(df<span class="op">$</span>text, <span class="dv">155</span>)</a>
<a class="sourceLine" id="cb2-2" title="2"><span class="kw">wordcloud</span>(<span class="dt">words =</span> df_cloud<span class="op">$</span>WORD, <span class="dt">freq =</span> df_cloud<span class="op">$</span>FREQ,<span class="dt">colors=</span><span class="kw">brewer.pal</span>(<span class="dv">8</span>, <span class="st">&quot;Dark2&quot;</span>),<span class="dt">rot.per=</span><span class="fl">0.35</span>,<span class="dt">max.words=</span><span class="dv">120</span>)</a></code></pre></div>
<center>
<img src="Figs/word_cloud.png" title="fig:" alt="Word cloud" />
</center>
<p> </p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1">df_bigram&lt;-df<span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-2" title="2"><span class="st">  </span><span class="kw">unnest_tokens</span>(word, text, <span class="dt">token =</span> <span class="st">&quot;ngrams&quot;</span>, <span class="dt">n =</span> <span class="dv">2</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-3" title="3"><span class="st">  </span><span class="kw">separate</span>(word, <span class="kw">c</span>(<span class="st">&quot;word1&quot;</span>, <span class="st">&quot;word2&quot;</span>), <span class="dt">sep =</span> <span class="st">&quot; &quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-4" title="4"><span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span>word1 <span class="op">%in%</span><span class="st"> </span>stop_words<span class="op">$</span>word) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-5" title="5"><span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span>word2 <span class="op">%in%</span><span class="st"> </span>stop_words<span class="op">$</span>word) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-6" title="6"><span class="st">  </span><span class="kw">filter</span>(word1 <span class="op">!=</span><span class="st"> </span>word2) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-7" title="7"><span class="st">  </span><span class="kw">unite</span>(word,word1, word2, <span class="dt">sep =</span> <span class="st">&quot; &quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-8" title="8"><span class="st">  </span><span class="kw">count</span>(word, <span class="dt">sort =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-9" title="9"><span class="st">  </span><span class="kw">slice</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">80</span>)</a>
<a class="sourceLine" id="cb3-10" title="10"></a>
<a class="sourceLine" id="cb3-11" title="11">df_bigram<span class="op">$</span>first_words &lt;-<span class="st"> </span><span class="kw">str_extract</span>(df_bigram<span class="op">$</span>word,<span class="st">&quot;(</span><span class="ch">\\</span><span class="st">w+)&quot;</span>)</a>
<a class="sourceLine" id="cb3-12" title="12">df_bigram<span class="op">$</span>second_words &lt;-<span class="st"> </span><span class="kw">str_extract</span>(df_bigram<span class="op">$</span>word,<span class="st">&quot;(</span><span class="ch">\\</span><span class="st">w+$)&quot;</span>)</a>
<a class="sourceLine" id="cb3-13" title="13">df_bigram&lt;-df_bigram <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(first_words, second_words, n)</a>
<a class="sourceLine" id="cb3-14" title="14">graph &lt;-<span class="st"> </span><span class="kw">graph_from_data_frame</span>(df_bigram)</a>
<a class="sourceLine" id="cb3-15" title="15"><span class="kw">ggraph</span>(graph, <span class="dt">layout =</span> <span class="st">&quot;fr&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb3-16" title="16"><span class="st"> </span><span class="kw">geom_edge_link</span>(<span class="kw">aes</span>(<span class="dt">edge_alpha=</span>n),<span class="dt">arrow =</span> <span class="kw">arrow</span>(<span class="dt">type =</span> <span class="st">&quot;closed&quot;</span>, <span class="dt">length =</span> <span class="kw">unit</span>(<span class="dv">3</span>, <span class="st">&#39;mm&#39;</span>))) <span class="op">+</span></a>
<a class="sourceLine" id="cb3-17" title="17"><span class="st">  </span><span class="kw">geom_node_point</span>(<span class="dt">color =</span> <span class="st">&quot;lightblue&quot;</span>,<span class="dt">alpha=</span><span class="fl">0.5</span>,<span class="dt">size=</span><span class="dv">5</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb3-18" title="18"><span class="kw">geom_node_text</span>(<span class="kw">aes</span>(<span class="dt">label =</span> name), <span class="dt">vjust =</span> <span class="dv">1</span>, <span class="dt">hjust =</span> <span class="dv">1</span>,<span class="dt">repel=</span><span class="ot">TRUE</span>)<span class="op">+</span></a>
<a class="sourceLine" id="cb3-19" title="19"><span class="st">  </span><span class="kw">theme_void</span>()</a></code></pre></div>
<center>
<img src="Figs/Bigram.png" title="fig:" alt="Bi-gram" />
</center>
<p> </p>
</div>
<div id="feature-generation" class="section level4">
<h4><span class="header">Feature generation</span></h4>
<p>After preprocessing we build a corpus of text and generate feture dataset out of it. We use Document-term matrix (DTM) methodology for getting most frequent terms. We removed the sparse occuring terms and also added two additional aatributes in with DTM which showed number of words in reviews and it’s length respectively.</p>
<blockquote>
<blockquote>
<p><strong>Document-term matrix</strong>: It is a mathematical matrix, describing the frequency of a particular term in the document, where row is documents in the collection and columns correspond to terms.</p>
</blockquote>
</blockquote>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1">review_corpus&lt;-<span class="kw">Corpus</span>(<span class="kw">VectorSource</span>(df<span class="op">$</span>text)) <span class="co">#corpus of reviews </span></a>
<a class="sourceLine" id="cb4-2" title="2">dtm_train &lt;-<span class="st"> </span><span class="kw">DocumentTermMatrix</span>(review_corpus) <span class="co">#document term matrix</span></a>
<a class="sourceLine" id="cb4-3" title="3">dtm_corpus &lt;-<span class="st"> </span><span class="kw">removeSparseTerms</span>(dtm_train, <span class="fl">0.90</span>)</a>
<a class="sourceLine" id="cb4-4" title="4">dtm_train_matrix &lt;-<span class="st"> </span><span class="kw">as.matrix</span>(dtm_corpus)</a>
<a class="sourceLine" id="cb4-5" title="5">dtm_train_matrix &lt;-<span class="st"> </span><span class="kw">cbind</span>(dtm_train_matrix,df<span class="op">$</span>word_count,df<span class="op">$</span>text_len)    <span class="co">#binding word_count and text_len</span></a>
<a class="sourceLine" id="cb4-6" title="6">dtm_train_matrix &lt;-<span class="st"> </span><span class="kw">cbind</span>(dtm_train_matrix, df<span class="op">$</span>review_sentiment) <span class="co">#bind the y label</span></a>
<a class="sourceLine" id="cb4-7" title="7"><span class="kw">colnames</span>(dtm_train_matrix)[<span class="kw">ncol</span>(dtm_train_matrix)] &lt;-<span class="st"> &quot;y&quot;</span> <span class="co">#rename the column</span></a>
<a class="sourceLine" id="cb4-8" title="8"></a>
<a class="sourceLine" id="cb4-9" title="9">training_set &lt;-<span class="st"> </span><span class="kw">as.data.frame</span>(dtm_train_matrix) <span class="co">#convert to data frame</span></a>
<a class="sourceLine" id="cb4-10" title="10">training_set<span class="op">$</span>y &lt;-<span class="st"> </span><span class="kw">as.factor</span>(training_set<span class="op">$</span>y)</a>
<a class="sourceLine" id="cb4-11" title="11">training_set[,<span class="dv">24</span>] &lt;-<span class="st"> </span><span class="kw">as.numeric</span>(<span class="kw">as.character</span>(training_set[,<span class="dv">24</span>]))</a>
<a class="sourceLine" id="cb4-12" title="12">training_set[,<span class="dv">25</span>] &lt;-<span class="st"> </span><span class="kw">as.numeric</span>(<span class="kw">as.character</span>(training_set[,<span class="dv">25</span>]))</a>
<a class="sourceLine" id="cb4-13" title="13">training_set[<span class="kw">sapply</span>(training_set, is.factor)] &lt;-<span class="st"> </span><span class="kw">lapply</span>(training_set[<span class="kw">sapply</span>(training_set, is.factor)], as.integer)</a>
<a class="sourceLine" id="cb4-14" title="14"><span class="co">#unique(training_set$y)</span></a>
<a class="sourceLine" id="cb4-15" title="15">training_set&lt;-<span class="kw">transform</span>(training_set, <span class="dt">y =</span> <span class="kw">as.factor</span>(y))</a></code></pre></div>
<p> </p>
<p>Here is the sample of the how the feature set looks like</p>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["good"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["menu"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["always"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["best"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["definitely"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["nice"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["staff"],"name":[7],"type":["dbl"],"align":["right"]},{"label":["came"],"name":[8],"type":["dbl"],"align":["right"]},{"label":["can"],"name":[9],"type":["dbl"],"align":["right"]},{"label":["delicious"],"name":[10],"type":["dbl"],"align":["right"]},{"label":["even"],"name":[11],"type":["dbl"],"align":["right"]},{"label":["first"],"name":[12],"type":["dbl"],"align":["right"]},{"label":["little"],"name":[13],"type":["dbl"],"align":["right"]},{"label":["love"],"name":[14],"type":["dbl"],"align":["right"]},{"label":["made"],"name":[15],"type":["dbl"],"align":["right"]},{"label":["never"],"name":[16],"type":["dbl"],"align":["right"]},{"label":["also"],"name":[17],"type":["dbl"],"align":["right"]},{"label":["chicken"],"name":[18],"type":["dbl"],"align":["right"]},{"label":["great"],"name":[19],"type":["dbl"],"align":["right"]},{"label":["really"],"name":[20],"type":["dbl"],"align":["right"]},{"label":["well"],"name":[21],"type":["dbl"],"align":["right"]},{"label":["went"],"name":[22],"type":["dbl"],"align":["right"]},{"label":["come"],"name":[23],"type":["dbl"],"align":["right"]},{"label":["try"],"name":[24],"type":["dbl"],"align":["right"]},{"label":["like"],"name":[25],"type":["dbl"],"align":["right"]},{"label":["restaurant"],"name":[26],"type":["dbl"],"align":["right"]},{"label":["got"],"name":[27],"type":["dbl"],"align":["right"]},{"label":["fresh"],"name":[28],"type":["dbl"],"align":["right"]},{"label":["friendly"],"name":[29],"type":["dbl"],"align":["right"]},{"label":["amazing"],"name":[30],"type":["dbl"],"align":["right"]},{"label":["much"],"name":[31],"type":["dbl"],"align":["right"]},{"label":["V32"],"name":[32],"type":["dbl"],"align":["right"]},{"label":["V33"],"name":[33],"type":["dbl"],"align":["right"]}],"data":[{"1":"1","2":"1","3":"0","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","21":"0","22":"0","23":"0","24":"0","25":"0","26":"0","27":"0","28":"0","29":"0","30":"0","31":"0","32":"22","33":"72","_rn_":"1"},{"1":"0","2":"0","3":"1","4":"1","5":"1","6":"1","7":"1","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","21":"0","22":"0","23":"0","24":"0","25":"0","26":"0","27":"0","28":"0","29":"0","30":"0","31":"0","32":"37","33":"137","_rn_":"2"},{"1":"1","2":"0","3":"0","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","21":"0","22":"0","23":"0","24":"0","25":"0","26":"0","27":"0","28":"0","29":"0","30":"0","31":"0","32":"16","33":"54","_rn_":"3"},{"1":"0","2":"0","3":"0","4":"0","5":"0","6":"0","7":"0","8":"1","9":"1","10":"1","11":"1","12":"4","13":"1","14":"1","15":"1","16":"0","17":"0","18":"0","19":"0","20":"0","21":"0","22":"0","23":"0","24":"0","25":"0","26":"0","27":"0","28":"0","29":"0","30":"0","31":"0","32":"271","33":"905","_rn_":"4"},{"1":"1","2":"0","3":"0","4":"0","5":"0","6":"1","7":"0","8":"0","9":"0","10":"0","11":"0","12":"1","13":"0","14":"0","15":"1","16":"1","17":"0","18":"0","19":"0","20":"0","21":"0","22":"0","23":"0","24":"0","25":"0","26":"0","27":"0","28":"0","29":"0","30":"0","31":"0","32":"135","33":"435","_rn_":"5"},{"1":"2","2":"2","3":"0","4":"0","5":"0","6":"0","7":"0","8":"1","9":"0","10":"0","11":"1","12":"0","13":"0","14":"0","15":"0","16":"0","17":"2","18":"3","19":"3","20":"1","21":"3","22":"2","23":"0","24":"0","25":"0","26":"0","27":"0","28":"0","29":"0","30":"0","31":"0","32":"214","33":"787","_rn_":"6"},{"1":"1","2":"0","3":"0","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"1","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","21":"0","22":"0","23":"0","24":"0","25":"0","26":"0","27":"0","28":"0","29":"0","30":"0","31":"0","32":"59","33":"200","_rn_":"7"},{"1":"0","2":"0","3":"0","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"1","20":"0","21":"0","22":"1","23":"0","24":"0","25":"0","26":"0","27":"0","28":"0","29":"0","30":"0","31":"0","32":"30","33":"92","_rn_":"8"},{"1":"0","2":"0","3":"0","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","21":"0","22":"0","23":"1","24":"1","25":"0","26":"0","27":"0","28":"0","29":"0","30":"0","31":"0","32":"44","33":"170","_rn_":"9"},{"1":"0","2":"0","3":"0","4":"1","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","21":"0","22":"0","23":"0","24":"0","25":"0","26":"0","27":"0","28":"0","29":"0","30":"0","31":"0","32":"26","33":"99","_rn_":"10"},{"1":"0","2":"0","3":"0","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"2","12":"1","13":"0","14":"0","15":"1","16":"0","17":"0","18":"0","19":"1","20":"0","21":"0","22":"0","23":"0","24":"0","25":"1","26":"1","27":"0","28":"0","29":"0","30":"0","31":"0","32":"180","33":"612","_rn_":"11"},{"1":"0","2":"0","3":"0","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"1","15":"0","16":"0","17":"1","18":"0","19":"1","20":"0","21":"0","22":"0","23":"0","24":"0","25":"0","26":"0","27":"0","28":"0","29":"0","30":"0","31":"0","32":"59","33":"220","_rn_":"12"},{"1":"0","2":"0","3":"0","4":"0","5":"0","6":"0","7":"0","8":"0","9":"1","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","21":"0","22":"0","23":"0","24":"0","25":"0","26":"0","27":"1","28":"0","29":"0","30":"0","31":"0","32":"25","33":"79","_rn_":"13"},{"1":"2","2":"0","3":"0","4":"0","5":"0","6":"1","7":"0","8":"4","9":"0","10":"1","11":"0","12":"1","13":"1","14":"0","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","21":"1","22":"0","23":"0","24":"0","25":"1","26":"0","27":"0","28":"0","29":"0","30":"0","31":"0","32":"204","33":"738","_rn_":"14"},{"1":"0","2":"0","3":"0","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"2","19":"0","20":"0","21":"0","22":"0","23":"0","24":"0","25":"0","26":"0","27":"0","28":"0","29":"0","30":"0","31":"0","32":"27","33":"92","_rn_":"15"},{"1":"0","2":"0","3":"0","4":"0","5":"0","6":"0","7":"0","8":"1","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","21":"0","22":"0","23":"0","24":"0","25":"0","26":"0","27":"0","28":"0","29":"0","30":"0","31":"0","32":"61","33":"210","_rn_":"16"},{"1":"0","2":"0","3":"0","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"1","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","21":"0","22":"0","23":"0","24":"0","25":"0","26":"0","27":"0","28":"0","29":"0","30":"0","31":"0","32":"77","33":"331","_rn_":"17"},{"1":"1","2":"0","3":"0","4":"1","5":"1","6":"1","7":"0","8":"1","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"1","16":"1","17":"1","18":"2","19":"1","20":"0","21":"2","22":"1","23":"0","24":"0","25":"2","26":"0","27":"0","28":"1","29":"1","30":"0","31":"0","32":"236","33":"819","_rn_":"18"},{"1":"0","2":"0","3":"0","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"1","11":"0","12":"2","13":"1","14":"0","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","21":"0","22":"0","23":"0","24":"1","25":"0","26":"0","27":"0","28":"1","29":"0","30":"0","31":"0","32":"46","33":"146","_rn_":"19"},{"1":"0","2":"0","3":"0","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"1","20":"0","21":"0","22":"0","23":"0","24":"0","25":"0","26":"0","27":"0","28":"0","29":"0","30":"0","31":"0","32":"40","33":"149","_rn_":"20"},{"1":"0","2":"0","3":"0","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"1","12":"2","13":"0","14":"0","15":"0","16":"1","17":"0","18":"0","19":"0","20":"0","21":"0","22":"1","23":"0","24":"1","25":"0","26":"0","27":"1","28":"0","29":"0","30":"0","31":"0","32":"227","33":"717","_rn_":"21"},{"1":"1","2":"0","3":"0","4":"1","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","21":"0","22":"0","23":"0","24":"0","25":"0","26":"0","27":"0","28":"0","29":"0","30":"0","31":"0","32":"43","33":"129","_rn_":"22"},{"1":"1","2":"1","3":"0","4":"0","5":"0","6":"1","7":"0","8":"3","9":"0","10":"0","11":"1","12":"0","13":"2","14":"1","15":"1","16":"0","17":"0","18":"2","19":"0","20":"0","21":"0","22":"0","23":"0","24":"1","25":"1","26":"1","27":"1","28":"0","29":"0","30":"0","31":"0","32":"138","33":"519","_rn_":"23"},{"1":"1","2":"0","3":"0","4":"1","5":"0","6":"0","7":"0","8":"0","9":"0","10":"2","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"2","18":"0","19":"1","20":"0","21":"0","22":"0","23":"0","24":"0","25":"0","26":"0","27":"0","28":"0","29":"0","30":"0","31":"0","32":"80","33":"284","_rn_":"24"},{"1":"0","2":"0","3":"0","4":"1","5":"0","6":"0","7":"0","8":"1","9":"0","10":"0","11":"0","12":"0","13":"0","14":"1","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","21":"0","22":"0","23":"0","24":"0","25":"0","26":"0","27":"0","28":"0","29":"0","30":"1","31":"1","32":"68","33":"226","_rn_":"25"},{"1":"0","2":"0","3":"1","4":"0","5":"0","6":"1","7":"0","8":"0","9":"0","10":"2","11":"1","12":"0","13":"0","14":"0","15":"1","16":"0","17":"0","18":"0","19":"0","20":"0","21":"0","22":"0","23":"0","24":"0","25":"0","26":"0","27":"0","28":"1","29":"0","30":"0","31":"0","32":"73","33":"293","_rn_":"26"},{"1":"0","2":"0","3":"0","4":"1","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","21":"2","22":"0","23":"0","24":"1","25":"0","26":"0","27":"0","28":"0","29":"0","30":"1","31":"0","32":"38","33":"131","_rn_":"27"},{"1":"0","2":"0","3":"0","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"2","11":"0","12":"2","13":"0","14":"0","15":"1","16":"0","17":"0","18":"0","19":"0","20":"0","21":"0","22":"0","23":"0","24":"2","25":"0","26":"0","27":"0","28":"0","29":"0","30":"0","31":"0","32":"162","33":"560","_rn_":"28"},{"1":"0","2":"0","3":"0","4":"0","5":"1","6":"0","7":"0","8":"0","9":"0","10":"1","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"1","20":"0","21":"0","22":"0","23":"1","24":"0","25":"0","26":"0","27":"0","28":"2","29":"1","30":"1","31":"0","32":"83","33":"287","_rn_":"29"},{"1":"0","2":"0","3":"0","4":"1","5":"0","6":"0","7":"1","8":"0","9":"1","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"0","20":"1","21":"0","22":"0","23":"0","24":"1","25":"0","26":"1","27":"0","28":"1","29":"1","30":"0","31":"0","32":"77","33":"349","_rn_":"30"},{"1":"0","2":"1","3":"2","4":"2","5":"0","6":"0","7":"0","8":"0","9":"2","10":"0","11":"0","12":"2","13":"0","14":"1","15":"1","16":"0","17":"1","18":"1","19":"3","20":"0","21":"0","22":"0","23":"0","24":"1","25":"0","26":"2","27":"0","28":"0","29":"0","30":"0","31":"0","32":"182","33":"644","_rn_":"31"},{"1":"0","2":"0","3":"0","4":"0","5":"0","6":"0","7":"1","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"1","16":"1","17":"0","18":"0","19":"0","20":"0","21":"1","22":"0","23":"1","24":"0","25":"0","26":"0","27":"0","28":"0","29":"0","30":"0","31":"0","32":"138","33":"455","_rn_":"32"},{"1":"1","2":"0","3":"0","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"1","19":"0","20":"0","21":"0","22":"0","23":"0","24":"0","25":"1","26":"0","27":"0","28":"0","29":"0","30":"0","31":"0","32":"90","33":"247","_rn_":"33"},{"1":"1","2":"0","3":"0","4":"2","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"1","14":"1","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","21":"0","22":"0","23":"0","24":"0","25":"0","26":"0","27":"1","28":"0","29":"0","30":"0","31":"0","32":"96","33":"410","_rn_":"34"},{"1":"0","2":"0","3":"0","4":"0","5":"0","6":"0","7":"1","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"1","19":"0","20":"0","21":"0","22":"0","23":"0","24":"0","25":"0","26":"0","27":"0","28":"0","29":"0","30":"0","31":"0","32":"82","33":"270","_rn_":"35"},{"1":"0","2":"0","3":"1","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"1","20":"0","21":"0","22":"0","23":"0","24":"0","25":"0","26":"0","27":"0","28":"1","29":"0","30":"0","31":"0","32":"105","33":"410","_rn_":"36"},{"1":"3","2":"1","3":"0","4":"0","5":"0","6":"0","7":"0","8":"1","9":"0","10":"0","11":"0","12":"0","13":"0","14":"1","15":"0","16":"0","17":"0","18":"2","19":"0","20":"1","21":"0","22":"0","23":"0","24":"0","25":"0","26":"0","27":"1","28":"1","29":"0","30":"0","31":"0","32":"292","33":"1003","_rn_":"37"},{"1":"0","2":"0","3":"0","4":"1","5":"0","6":"0","7":"0","8":"0","9":"2","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","21":"0","22":"0","23":"0","24":"0","25":"2","26":"0","27":"0","28":"0","29":"0","30":"0","31":"0","32":"62","33":"240","_rn_":"38"},{"1":"2","2":"0","3":"0","4":"0","5":"0","6":"1","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"1","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","21":"0","22":"0","23":"0","24":"0","25":"0","26":"0","27":"0","28":"0","29":"0","30":"0","31":"0","32":"18","33":"62","_rn_":"39"},{"1":"0","2":"0","3":"0","4":"1","5":"0","6":"0","7":"0","8":"0","9":"1","10":"0","11":"1","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"0","20":"1","21":"0","22":"0","23":"0","24":"0","25":"0","26":"1","27":"0","28":"0","29":"0","30":"0","31":"0","32":"150","33":"526","_rn_":"40"},{"1":"0","2":"0","3":"0","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"1","11":"0","12":"0","13":"0","14":"0","15":"0","16":"2","17":"1","18":"0","19":"0","20":"0","21":"0","22":"0","23":"0","24":"0","25":"0","26":"0","27":"0","28":"0","29":"0","30":"0","31":"0","32":"17","33":"74","_rn_":"41"},{"1":"0","2":"0","3":"2","4":"0","5":"0","6":"1","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"3","17":"0","18":"0","19":"0","20":"2","21":"0","22":"0","23":"1","24":"0","25":"1","26":"3","27":"0","28":"0","29":"0","30":"1","31":"0","32":"102","33":"379","_rn_":"42"},{"1":"6","2":"0","3":"1","4":"1","5":"1","6":"2","7":"0","8":"1","9":"0","10":"0","11":"0","12":"3","13":"0","14":"0","15":"0","16":"0","17":"1","18":"6","19":"2","20":"1","21":"7","22":"0","23":"0","24":"0","25":"1","26":"0","27":"1","28":"0","29":"0","30":"0","31":"0","32":"419","33":"1492","_rn_":"43"},{"1":"0","2":"0","3":"0","4":"0","5":"1","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","21":"0","22":"0","23":"0","24":"0","25":"0","26":"2","27":"0","28":"0","29":"0","30":"0","31":"0","32":"93","33":"423","_rn_":"44"},{"1":"2","2":"0","3":"0","4":"0","5":"0","6":"1","7":"1","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"1","15":"1","16":"0","17":"0","18":"0","19":"0","20":"0","21":"0","22":"0","23":"0","24":"0","25":"0","26":"1","27":"0","28":"0","29":"0","30":"0","31":"0","32":"105","33":"384","_rn_":"45"},{"1":"0","2":"0","3":"0","4":"0","5":"0","6":"0","7":"0","8":"1","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"1","20":"0","21":"0","22":"0","23":"0","24":"0","25":"0","26":"0","27":"0","28":"0","29":"0","30":"0","31":"0","32":"46","33":"114","_rn_":"46"},{"1":"0","2":"0","3":"0","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"5","20":"0","21":"0","22":"0","23":"0","24":"0","25":"0","26":"0","27":"0","28":"0","29":"0","30":"0","31":"0","32":"48","33":"160","_rn_":"47"},{"1":"0","2":"1","3":"0","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","21":"0","22":"0","23":"0","24":"0","25":"0","26":"0","27":"0","28":"0","29":"0","30":"1","31":"0","32":"16","33":"71","_rn_":"48"},{"1":"0","2":"0","3":"0","4":"0","5":"0","6":"0","7":"1","8":"0","9":"0","10":"0","11":"0","12":"0","13":"2","14":"1","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","21":"0","22":"0","23":"0","24":"0","25":"1","26":"0","27":"0","28":"0","29":"0","30":"0","31":"0","32":"136","33":"529","_rn_":"49"},{"1":"0","2":"3","3":"0","4":"1","5":"0","6":"0","7":"0","8":"1","9":"2","10":"0","11":"1","12":"2","13":"1","14":"0","15":"2","16":"0","17":"1","18":"3","19":"0","20":"0","21":"0","22":"0","23":"0","24":"1","25":"0","26":"0","27":"0","28":"1","29":"0","30":"0","31":"0","32":"252","33":"862","_rn_":"50"},{"1":"2","2":"0","3":"0","4":"0","5":"1","6":"1","7":"1","8":"0","9":"0","10":"0","11":"0","12":"0","13":"1","14":"0","15":"0","16":"1","17":"1","18":"0","19":"0","20":"1","21":"0","22":"0","23":"0","24":"0","25":"0","26":"0","27":"0","28":"0","29":"1","30":"0","31":"0","32":"121","33":"459","_rn_":"51"},{"1":"0","2":"0","3":"0","4":"0","5":"1","6":"0","7":"1","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"1","20":"0","21":"0","22":"0","23":"0","24":"0","25":"0","26":"0","27":"0","28":"0","29":"1","30":"0","31":"0","32":"13","33":"71","_rn_":"52"},{"1":"0","2":"0","3":"0","4":"0","5":"0","6":"0","7":"0","8":"1","9":"0","10":"0","11":"1","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"1","20":"0","21":"0","22":"0","23":"0","24":"0","25":"0","26":"0","27":"0","28":"0","29":"0","30":"0","31":"0","32":"71","33":"286","_rn_":"53"},{"1":"0","2":"0","3":"0","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","21":"0","22":"1","23":"0","24":"0","25":"0","26":"0","27":"0","28":"0","29":"0","30":"0","31":"0","32":"44","33":"169","_rn_":"54"},{"1":"1","2":"0","3":"0","4":"0","5":"1","6":"0","7":"0","8":"0","9":"0","10":"0","11":"1","12":"0","13":"0","14":"0","15":"0","16":"0","17":"1","18":"0","19":"0","20":"0","21":"0","22":"0","23":"0","24":"0","25":"0","26":"0","27":"1","28":"0","29":"0","30":"2","31":"0","32":"94","33":"291","_rn_":"55"},{"1":"0","2":"0","3":"0","4":"0","5":"0","6":"0","7":"0","8":"0","9":"1","10":"1","11":"0","12":"0","13":"0","14":"0","15":"1","16":"0","17":"0","18":"0","19":"0","20":"0","21":"0","22":"0","23":"0","24":"0","25":"0","26":"0","27":"0","28":"1","29":"0","30":"0","31":"0","32":"27","33":"119","_rn_":"56"},{"1":"0","2":"0","3":"0","4":"0","5":"0","6":"0","7":"0","8":"0","9":"1","10":"1","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"1","20":"0","21":"0","22":"0","23":"0","24":"0","25":"0","26":"0","27":"0","28":"0","29":"0","30":"0","31":"0","32":"20","33":"60","_rn_":"57"},{"1":"0","2":"0","3":"0","4":"1","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"1","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","21":"0","22":"0","23":"0","24":"0","25":"0","26":"0","27":"0","28":"0","29":"0","30":"0","31":"0","32":"38","33":"137","_rn_":"58"},{"1":"0","2":"0","3":"3","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"2","20":"0","21":"0","22":"0","23":"0","24":"0","25":"0","26":"0","27":"0","28":"1","29":"0","30":"1","31":"0","32":"28","33":"150","_rn_":"59"},{"1":"0","2":"0","3":"0","4":"1","5":"0","6":"0","7":"0","8":"0","9":"0","10":"1","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","21":"0","22":"0","23":"0","24":"0","25":"0","26":"0","27":"0","28":"0","29":"0","30":"0","31":"0","32":"15","33":"66","_rn_":"60"},{"1":"1","2":"0","3":"0","4":"1","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"1","15":"0","16":"0","17":"0","18":"2","19":"0","20":"0","21":"0","22":"0","23":"0","24":"0","25":"0","26":"0","27":"0","28":"0","29":"1","30":"0","31":"1","32":"59","33":"192","_rn_":"61"},{"1":"0","2":"0","3":"0","4":"0","5":"0","6":"1","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"2","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","21":"0","22":"0","23":"0","24":"0","25":"0","26":"0","27":"0","28":"0","29":"1","30":"0","31":"0","32":"25","33":"89","_rn_":"62"},{"1":"0","2":"0","3":"0","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"1","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","21":"0","22":"0","23":"0","24":"0","25":"0","26":"0","27":"0","28":"0","29":"0","30":"0","31":"1","32":"45","33":"188","_rn_":"63"},{"1":"0","2":"0","3":"0","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","21":"0","22":"0","23":"1","24":"0","25":"0","26":"1","27":"0","28":"0","29":"0","30":"0","31":"0","32":"50","33":"191","_rn_":"64"},{"1":"0","2":"0","3":"1","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"1","20":"0","21":"0","22":"0","23":"0","24":"0","25":"0","26":"0","27":"1","28":"0","29":"1","30":"0","31":"0","32":"36","33":"130","_rn_":"65"},{"1":"0","2":"2","3":"0","4":"0","5":"1","6":"0","7":"0","8":"0","9":"1","10":"2","11":"0","12":"0","13":"1","14":"0","15":"1","16":"0","17":"0","18":"2","19":"1","20":"0","21":"0","22":"1","23":"0","24":"1","25":"0","26":"0","27":"0","28":"1","29":"0","30":"0","31":"0","32":"121","33":"489","_rn_":"66"},{"1":"0","2":"0","3":"0","4":"0","5":"0","6":"0","7":"1","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","21":"0","22":"0","23":"0","24":"0","25":"0","26":"1","27":"0","28":"0","29":"0","30":"0","31":"0","32":"74","33":"291","_rn_":"67"},{"1":"1","2":"0","3":"0","4":"0","5":"0","6":"0","7":"0","8":"0","9":"1","10":"1","11":"0","12":"0","13":"2","14":"0","15":"0","16":"1","17":"0","18":"0","19":"0","20":"0","21":"0","22":"0","23":"0","24":"0","25":"1","26":"2","27":"0","28":"0","29":"0","30":"0","31":"0","32":"118","33":"463","_rn_":"68"},{"1":"0","2":"0","3":"0","4":"0","5":"1","6":"0","7":"1","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"2","20":"1","21":"0","22":"0","23":"0","24":"1","25":"0","26":"0","27":"0","28":"0","29":"1","30":"1","31":"0","32":"41","33":"208","_rn_":"69"},{"1":"2","2":"0","3":"0","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"3","19":"0","20":"0","21":"0","22":"0","23":"0","24":"0","25":"2","26":"0","27":"0","28":"0","29":"0","30":"0","31":"0","32":"40","33":"179","_rn_":"70"},{"1":"1","2":"0","3":"0","4":"0","5":"0","6":"0","7":"1","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"1","15":"0","16":"0","17":"1","18":"0","19":"0","20":"0","21":"1","22":"0","23":"0","24":"0","25":"2","26":"1","27":"0","28":"1","29":"0","30":"0","31":"0","32":"84","33":"351","_rn_":"71"},{"1":"2","2":"0","3":"0","4":"0","5":"1","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","21":"1","22":"0","23":"0","24":"0","25":"0","26":"0","27":"0","28":"0","29":"0","30":"0","31":"0","32":"47","33":"209","_rn_":"72"},{"1":"0","2":"0","3":"0","4":"1","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"0","20":"1","21":"0","22":"0","23":"0","24":"0","25":"0","26":"0","27":"0","28":"0","29":"1","30":"2","31":"0","32":"57","33":"213","_rn_":"73"},{"1":"0","2":"0","3":"0","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"1","20":"0","21":"0","22":"1","23":"1","24":"0","25":"0","26":"0","27":"0","28":"0","29":"0","30":"0","31":"0","32":"168","33":"653","_rn_":"74"},{"1":"0","2":"0","3":"0","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","21":"0","22":"0","23":"0","24":"0","25":"1","26":"0","27":"0","28":"0","29":"0","30":"0","31":"0","32":"70","33":"230","_rn_":"75"},{"1":"0","2":"0","3":"0","4":"1","5":"0","6":"0","7":"0","8":"0","9":"2","10":"0","11":"0","12":"0","13":"0","14":"0","15":"1","16":"0","17":"0","18":"0","19":"0","20":"0","21":"0","22":"0","23":"0","24":"1","25":"0","26":"0","27":"0","28":"0","29":"0","30":"0","31":"0","32":"86","33":"324","_rn_":"76"},{"1":"0","2":"0","3":"0","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"3","20":"0","21":"0","22":"0","23":"0","24":"1","25":"1","26":"2","27":"0","28":"0","29":"0","30":"0","31":"0","32":"60","33":"285","_rn_":"77"},{"1":"0","2":"0","3":"0","4":"0","5":"0","6":"1","7":"0","8":"0","9":"3","10":"0","11":"1","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"1","20":"0","21":"0","22":"1","23":"1","24":"1","25":"1","26":"0","27":"0","28":"0","29":"1","30":"0","31":"0","32":"126","33":"421","_rn_":"78"},{"1":"2","2":"0","3":"0","4":"0","5":"0","6":"0","7":"0","8":"4","9":"1","10":"0","11":"0","12":"0","13":"2","14":"0","15":"0","16":"0","17":"0","18":"1","19":"0","20":"4","21":"0","22":"0","23":"0","24":"0","25":"4","26":"0","27":"2","28":"0","29":"1","30":"0","31":"0","32":"383","33":"1417","_rn_":"79"},{"1":"1","2":"0","3":"0","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"1","20":"0","21":"0","22":"0","23":"1","24":"0","25":"0","26":"1","27":"0","28":"0","29":"0","30":"1","31":"0","32":"61","33":"199","_rn_":"80"},{"1":"0","2":"0","3":"0","4":"0","5":"0","6":"0","7":"0","8":"0","9":"1","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","21":"0","22":"0","23":"0","24":"0","25":"1","26":"0","27":"1","28":"0","29":"0","30":"0","31":"0","32":"66","33":"210","_rn_":"81"},{"1":"1","2":"0","3":"1","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","21":"0","22":"0","23":"0","24":"0","25":"0","26":"0","27":"0","28":"0","29":"1","30":"0","31":"0","32":"17","33":"69","_rn_":"82"},{"1":"0","2":"0","3":"0","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","21":"0","22":"0","23":"0","24":"0","25":"0","26":"1","27":"0","28":"0","29":"0","30":"0","31":"0","32":"27","33":"108","_rn_":"83"},{"1":"1","2":"0","3":"0","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"1","16":"0","17":"0","18":"0","19":"0","20":"1","21":"0","22":"0","23":"0","24":"0","25":"0","26":"0","27":"1","28":"0","29":"0","30":"0","31":"0","32":"98","33":"297","_rn_":"84"},{"1":"0","2":"0","3":"0","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","21":"1","22":"1","23":"0","24":"0","25":"0","26":"0","27":"0","28":"0","29":"0","30":"0","31":"0","32":"98","33":"337","_rn_":"85"},{"1":"1","2":"0","3":"1","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"1","16":"0","17":"0","18":"0","19":"0","20":"1","21":"0","22":"0","23":"1","24":"0","25":"1","26":"0","27":"2","28":"0","29":"1","30":"0","31":"0","32":"161","33":"565","_rn_":"86"},{"1":"2","2":"0","3":"0","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"1","15":"0","16":"0","17":"0","18":"0","19":"2","20":"0","21":"0","22":"0","23":"0","24":"0","25":"0","26":"1","27":"0","28":"0","29":"0","30":"0","31":"0","32":"41","33":"161","_rn_":"87"},{"1":"0","2":"0","3":"0","4":"1","5":"0","6":"1","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"1","20":"0","21":"0","22":"0","23":"0","24":"0","25":"0","26":"0","27":"0","28":"0","29":"0","30":"0","31":"0","32":"141","33":"462","_rn_":"88"},{"1":"1","2":"1","3":"0","4":"0","5":"1","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"2","15":"0","16":"0","17":"3","18":"0","19":"1","20":"1","21":"0","22":"0","23":"0","24":"0","25":"0","26":"0","27":"0","28":"1","29":"0","30":"0","31":"0","32":"87","33":"281","_rn_":"89"},{"1":"0","2":"0","3":"0","4":"0","5":"0","6":"0","7":"0","8":"1","9":"0","10":"1","11":"0","12":"1","13":"0","14":"0","15":"1","16":"0","17":"0","18":"0","19":"1","20":"0","21":"1","22":"0","23":"0","24":"0","25":"0","26":"0","27":"0","28":"0","29":"0","30":"0","31":"1","32":"64","33":"246","_rn_":"90"},{"1":"3","2":"1","3":"1","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"3","15":"0","16":"0","17":"1","18":"0","19":"0","20":"0","21":"0","22":"0","23":"1","24":"0","25":"1","26":"0","27":"0","28":"1","29":"0","30":"0","31":"0","32":"70","33":"247","_rn_":"91"},{"1":"2","2":"1","3":"0","4":"0","5":"0","6":"1","7":"0","8":"0","9":"1","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"1","19":"1","20":"0","21":"0","22":"0","23":"0","24":"0","25":"1","26":"0","27":"0","28":"0","29":"0","30":"0","31":"0","32":"97","33":"330","_rn_":"92"},{"1":"3","2":"0","3":"0","4":"1","5":"1","6":"0","7":"0","8":"0","9":"0","10":"0","11":"3","12":"0","13":"0","14":"0","15":"0","16":"1","17":"1","18":"0","19":"1","20":"0","21":"1","22":"1","23":"1","24":"0","25":"2","26":"1","27":"0","28":"0","29":"0","30":"0","31":"0","32":"309","33":"1069","_rn_":"93"},{"1":"0","2":"0","3":"0","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"1","16":"0","17":"0","18":"0","19":"0","20":"0","21":"0","22":"0","23":"0","24":"0","25":"0","26":"1","27":"0","28":"0","29":"0","30":"0","31":"0","32":"150","33":"524","_rn_":"94"},{"1":"1","2":"0","3":"0","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"1","18":"0","19":"1","20":"0","21":"1","22":"0","23":"0","24":"0","25":"1","26":"0","27":"0","28":"0","29":"0","30":"0","31":"0","32":"136","33":"411","_rn_":"95"},{"1":"0","2":"0","3":"0","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"1","15":"0","16":"0","17":"0","18":"1","19":"2","20":"0","21":"0","22":"0","23":"0","24":"0","25":"0","26":"0","27":"0","28":"0","29":"0","30":"0","31":"0","32":"15","33":"65","_rn_":"96"},{"1":"1","2":"0","3":"0","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","21":"0","22":"0","23":"0","24":"0","25":"0","26":"0","27":"0","28":"0","29":"1","30":"0","31":"0","32":"29","33":"128","_rn_":"97"},{"1":"0","2":"0","3":"1","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"1","17":"0","18":"0","19":"0","20":"0","21":"0","22":"0","23":"0","24":"0","25":"0","26":"0","27":"0","28":"0","29":"0","30":"0","31":"0","32":"74","33":"262","_rn_":"98"},{"1":"0","2":"0","3":"0","4":"0","5":"0","6":"0","7":"1","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"1","20":"2","21":"0","22":"0","23":"0","24":"0","25":"1","26":"0","27":"0","28":"0","29":"1","30":"0","31":"0","32":"77","33":"314","_rn_":"99"},{"1":"2","2":"0","3":"0","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"1","14":"0","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","21":"0","22":"0","23":"0","24":"0","25":"0","26":"0","27":"0","28":"0","29":"0","30":"0","31":"0","32":"25","33":"114","_rn_":"100"},{"1":"0","2":"0","3":"0","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"1","17":"0","18":"0","19":"0","20":"0","21":"0","22":"0","23":"0","24":"0","25":"0","26":"0","27":"0","28":"0","29":"0","30":"0","31":"1","32":"46","33":"148","_rn_":"101"},{"1":"0","2":"0","3":"0","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"2","19":"0","20":"0","21":"0","22":"0","23":"0","24":"0","25":"1","26":"0","27":"0","28":"1","29":"0","30":"0","31":"0","32":"58","33":"208","_rn_":"102"},{"1":"0","2":"0","3":"0","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","21":"0","22":"0","23":"0","24":"0","25":"0","26":"0","27":"0","28":"0","29":"0","30":"0","31":"0","32":"99","33":"344","_rn_":"103"},{"1":"0","2":"0","3":"1","4":"0","5":"0","6":"0","7":"1","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"1","20":"0","21":"0","22":"0","23":"0","24":"0","25":"0","26":"0","27":"0","28":"1","29":"1","30":"1","31":"0","32":"32","33":"143","_rn_":"104"},{"1":"0","2":"0","3":"0","4":"1","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"2","19":"0","20":"0","21":"0","22":"0","23":"0","24":"0","25":"0","26":"0","27":"0","28":"0","29":"1","30":"0","31":"0","32":"49","33":"158","_rn_":"105"},{"1":"3","2":"0","3":"0","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","21":"0","22":"0","23":"0","24":"0","25":"1","26":"0","27":"0","28":"0","29":"0","30":"0","31":"0","32":"156","33":"536","_rn_":"106"},{"1":"0","2":"0","3":"0","4":"0","5":"0","6":"0","7":"1","8":"0","9":"0","10":"1","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","21":"0","22":"0","23":"0","24":"0","25":"0","26":"0","27":"0","28":"0","29":"0","30":"0","31":"0","32":"19","33":"83","_rn_":"107"},{"1":"3","2":"0","3":"0","4":"0","5":"0","6":"1","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"1","20":"0","21":"1","22":"0","23":"0","24":"1","25":"0","26":"1","27":"0","28":"0","29":"0","30":"0","31":"1","32":"93","33":"319","_rn_":"108"},{"1":"1","2":"0","3":"0","4":"0","5":"0","6":"1","7":"0","8":"0","9":"0","10":"0","11":"1","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","21":"0","22":"0","23":"0","24":"0","25":"0","26":"0","27":"0","28":"0","29":"0","30":"0","31":"0","32":"39","33":"124","_rn_":"109"},{"1":"0","2":"1","3":"0","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"1","18":"0","19":"1","20":"0","21":"0","22":"1","23":"0","24":"0","25":"0","26":"0","27":"0","28":"0","29":"0","30":"0","31":"0","32":"36","33":"154","_rn_":"110"},{"1":"0","2":"0","3":"0","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"2","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","21":"0","22":"0","23":"1","24":"1","25":"0","26":"0","27":"0","28":"0","29":"0","30":"0","31":"0","32":"99","33":"344","_rn_":"111"},{"1":"0","2":"0","3":"1","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"1","15":"0","16":"0","17":"1","18":"0","19":"0","20":"0","21":"0","22":"0","23":"0","24":"1","25":"0","26":"0","27":"0","28":"0","29":"0","30":"0","31":"0","32":"57","33":"239","_rn_":"112"},{"1":"0","2":"1","3":"0","4":"0","5":"0","6":"0","7":"1","8":"0","9":"1","10":"1","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"1","18":"0","19":"0","20":"1","21":"0","22":"0","23":"0","24":"0","25":"0","26":"0","27":"2","28":"0","29":"1","30":"0","31":"0","32":"91","33":"354","_rn_":"113"},{"1":"2","2":"0","3":"1","4":"0","5":"1","6":"0","7":"0","8":"0","9":"0","10":"0","11":"2","12":"0","13":"0","14":"2","15":"0","16":"0","17":"0","18":"0","19":"2","20":"0","21":"0","22":"1","23":"0","24":"1","25":"0","26":"0","27":"0","28":"0","29":"0","30":"1","31":"0","32":"172","33":"688","_rn_":"114"},{"1":"0","2":"0","3":"0","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","21":"0","22":"1","23":"0","24":"0","25":"0","26":"0","27":"0","28":"0","29":"0","30":"0","31":"0","32":"50","33":"164","_rn_":"115"},{"1":"1","2":"0","3":"0","4":"0","5":"0","6":"2","7":"1","8":"0","9":"1","10":"0","11":"1","12":"0","13":"0","14":"0","15":"1","16":"1","17":"2","18":"0","19":"0","20":"0","21":"0","22":"0","23":"0","24":"1","25":"0","26":"0","27":"0","28":"0","29":"1","30":"0","31":"0","32":"289","33":"1145","_rn_":"116"},{"1":"0","2":"0","3":"0","4":"0","5":"0","6":"0","7":"1","8":"0","9":"0","10":"0","11":"3","12":"0","13":"0","14":"1","15":"1","16":"0","17":"2","18":"0","19":"0","20":"0","21":"1","22":"0","23":"1","24":"0","25":"1","26":"0","27":"0","28":"0","29":"1","30":"1","31":"1","32":"175","33":"734","_rn_":"117"},{"1":"0","2":"0","3":"0","4":"1","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","21":"0","22":"0","23":"0","24":"0","25":"0","26":"0","27":"0","28":"0","29":"0","30":"0","31":"0","32":"12","33":"49","_rn_":"118"},{"1":"1","2":"0","3":"0","4":"0","5":"0","6":"0","7":"1","8":"0","9":"0","10":"0","11":"1","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"2","20":"0","21":"0","22":"0","23":"0","24":"0","25":"0","26":"1","27":"0","28":"0","29":"1","30":"0","31":"0","32":"43","33":"186","_rn_":"119"},{"1":"0","2":"0","3":"0","4":"0","5":"0","6":"0","7":"0","8":"0","9":"1","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","21":"0","22":"0","23":"1","24":"1","25":"0","26":"0","27":"0","28":"0","29":"1","30":"0","31":"0","32":"51","33":"181","_rn_":"120"},{"1":"3","2":"0","3":"0","4":"0","5":"0","6":"1","7":"0","8":"0","9":"1","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","21":"0","22":"1","23":"0","24":"0","25":"1","26":"0","27":"0","28":"0","29":"1","30":"0","31":"0","32":"94","33":"339","_rn_":"121"},{"1":"0","2":"0","3":"0","4":"1","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"1","15":"0","16":"0","17":"0","18":"1","19":"0","20":"0","21":"0","22":"0","23":"0","24":"0","25":"0","26":"0","27":"0","28":"1","29":"0","30":"0","31":"0","32":"26","33":"82","_rn_":"122"},{"1":"0","2":"0","3":"0","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"1","18":"1","19":"0","20":"0","21":"0","22":"1","23":"0","24":"1","25":"0","26":"0","27":"0","28":"0","29":"0","30":"0","31":"0","32":"65","33":"269","_rn_":"123"},{"1":"0","2":"1","3":"0","4":"0","5":"1","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","21":"0","22":"0","23":"0","24":"0","25":"0","26":"1","27":"0","28":"0","29":"0","30":"0","31":"0","32":"109","33":"406","_rn_":"124"},{"1":"0","2":"0","3":"0","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"2","20":"0","21":"0","22":"0","23":"0","24":"0","25":"0","26":"0","27":"0","28":"0","29":"0","30":"0","31":"0","32":"73","33":"298","_rn_":"125"},{"1":"0","2":"0","3":"0","4":"0","5":"0","6":"1","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"1","14":"0","15":"0","16":"1","17":"0","18":"0","19":"1","20":"0","21":"1","22":"1","23":"0","24":"0","25":"0","26":"0","27":"0","28":"0","29":"0","30":"0","31":"0","32":"154","33":"536","_rn_":"126"},{"1":"1","2":"0","3":"0","4":"0","5":"0","6":"0","7":"1","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","21":"0","22":"0","23":"1","24":"0","25":"0","26":"0","27":"0","28":"0","29":"1","30":"0","31":"0","32":"17","33":"66","_rn_":"127"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p> </p>
</div>
<div id="splitting-the-dataset" class="section level4">
<h4><span class="header">Splitting the dataset</span></h4>
<p>To ensure that there is no data-leak from the testset into our model. The training data of review text comes from different states than the states we use in our GUI. We split the dataset into two parts; train_model and train_app. train_model goes into our training. We check the performance of our model on train_app, which is also the dataset which we use in our GUI.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1"><span class="co">#remove the training data and the remaining data is used in shiny application</span></a>
<a class="sourceLine" id="cb5-2" title="2">train_model&lt;-<span class="kw">head</span>(training_set,<span class="dv">100000</span>)</a>
<a class="sourceLine" id="cb5-3" title="3">train_app &lt;-<span class="st"> </span><span class="kw">tail</span>(training_set, <span class="dv">-100000</span>)</a>
<a class="sourceLine" id="cb5-4" title="4">test_set &lt;-<span class="st"> </span><span class="kw">subset</span>(train_app, <span class="dt">select =</span> <span class="op">-</span><span class="kw">c</span>(y) ) <span class="co">#remove the y label from the data to be used in shiny application</span></a></code></pre></div>
<p> </p>
</div>
<div id="classificatio-models" class="section level4">
<h4><span class="header">Classificatio models</span></h4>
<p>We use two of the already available models from R packages; Naive bayes <a href="https://www.rdocumentation.org/packages/e1071/versions/1.7-3/topics/naiveBayes">(NB)</a> &amp; Random Forest <a href="https://www.rdocumentation.org/packages/randomForest/versions/4.6-14/topics/randomForest">(RF)</a> trees. It was set to default parameters.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1"><span class="co">########Naive Bayes model######</span></a>
<a class="sourceLine" id="cb6-2" title="2">review_model_bayes&lt;-<span class="kw">naiveBayes</span>(y<span class="op">~</span>., <span class="dt">data=</span>train_model) <span class="co">#training on naive bayes model</span></a>
<a class="sourceLine" id="cb6-3" title="3"></a>
<a class="sourceLine" id="cb6-4" title="4"><span class="co">####Testing the model#####</span></a>
<a class="sourceLine" id="cb6-5" title="5">review_model_bayes_predict&lt;-<span class="kw">predict</span>(review_model_bayes, <span class="dt">newdata=</span>test_set, <span class="dt">type=</span><span class="st">&quot;class&quot;</span>) <span class="co">#test on the data </span></a>
<a class="sourceLine" id="cb6-6" title="6"><span class="co">#actual and predict dataframe</span></a>
<a class="sourceLine" id="cb6-7" title="7">review_model_bayes_predict_df&lt;-<span class="st"> </span><span class="kw">cbind</span>(review_model_bayes_predict, train_app<span class="op">$</span>y) </a>
<a class="sourceLine" id="cb6-8" title="8"><span class="kw">colnames</span>(review_model_bayes_predict_df)[<span class="dv">1</span>] =<span class="st"> &quot;predicted&quot;</span>  <span class="co">#dataframe containg actual value and predicted value</span></a>
<a class="sourceLine" id="cb6-9" title="9"><span class="kw">colnames</span>(review_model_bayes_predict_df)[<span class="dv">2</span>]=<span class="st">&#39;original&#39;</span></a>
<a class="sourceLine" id="cb6-10" title="10"><span class="kw">head</span>(review_model_bayes_predict_df,<span class="dv">5</span>)</a>
<a class="sourceLine" id="cb6-11" title="11">review_model_bayes_predict_df&lt;-<span class="kw">as.data.frame</span>(review_model_bayes_predict_df)</a>
<a class="sourceLine" id="cb6-12" title="12">review_model_bayes_predict_df&lt;-<span class="kw">transform</span>(review_model_bayes_predict_df, <span class="dt">original =</span> <span class="kw">as.factor</span>(original))</a>
<a class="sourceLine" id="cb6-13" title="13">review_model_bayes_predict_df&lt;-<span class="kw">transform</span>(review_model_bayes_predict_df, <span class="dt">predicted =</span> <span class="kw">as.factor</span>(predicted))</a>
<a class="sourceLine" id="cb6-14" title="14"></a>
<a class="sourceLine" id="cb6-15" title="15"></a>
<a class="sourceLine" id="cb6-16" title="16">random forest model </a>
<a class="sourceLine" id="cb6-17" title="17">rf_dtm_<span class="dv">100</span> &lt;-<span class="st"> </span><span class="kw">randomForest</span>(</a>
<a class="sourceLine" id="cb6-18" title="18">  y <span class="op">~</span><span class="st"> </span>.,</a>
<a class="sourceLine" id="cb6-19" title="19">  <span class="dt">data=</span>train_model,<span class="dt">ntree=</span><span class="dv">500</span>   <span class="co">#randomforest model</span></a>
<a class="sourceLine" id="cb6-20" title="20">)</a>
<a class="sourceLine" id="cb6-21" title="21"></a>
<a class="sourceLine" id="cb6-22" title="22"></a>
<a class="sourceLine" id="cb6-23" title="23"><span class="co">#####Random Forest model#######</span></a>
<a class="sourceLine" id="cb6-24" title="24">review_model_rf_predict&lt;-<span class="kw">predict</span>(rf_dtm_<span class="dv">100</span>, <span class="dt">newdata=</span>test_set, <span class="dt">type=</span><span class="st">&quot;class&quot;</span>)</a>
<a class="sourceLine" id="cb6-25" title="25"><span class="co">#actual and predict dataframe</span></a>
<a class="sourceLine" id="cb6-26" title="26">review_model_rf_predict_df&lt;-<span class="st"> </span><span class="kw">cbind</span>(review_model_rf_predict, train_app<span class="op">$</span>y)</a>
<a class="sourceLine" id="cb6-27" title="27"><span class="kw">colnames</span>(review_model_rf_predict_df)[<span class="dv">1</span>] =<span class="st"> &quot;predicted&quot;</span></a>
<a class="sourceLine" id="cb6-28" title="28"><span class="kw">colnames</span>(review_model_rf_predict_df)[<span class="dv">2</span>]=<span class="st">&#39;original&#39;</span></a>
<a class="sourceLine" id="cb6-29" title="29">review_model_rf_predict_df&lt;-<span class="kw">as.data.frame</span>(review_model_rf_predict_df)</a>
<a class="sourceLine" id="cb6-30" title="30">review_model_rf_predict_df&lt;-<span class="kw">transform</span>(review_model_rf_predict_df, <span class="dt">original =</span> <span class="kw">as.factor</span>(original))</a>
<a class="sourceLine" id="cb6-31" title="31">review_model_rf_predict_df&lt;-<span class="kw">transform</span>(review_model_rf_predict_df, <span class="dt">predicted =</span> <span class="kw">as.factor</span>(predicted))</a></code></pre></div>
<p> </p>
</div>
<div id="model-performance" class="section level4">
<h4><span class="header">Model performance</span></h4>
<p>We use accuracy and <a href="https://www.rdocumentation.org/packages/psych/versions/1.9.12.31/topics/cohen.kappa">Cohen’s Kappa</a> measure to check for model performance.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1"><span class="co"># model data to plot</span></a>
<a class="sourceLine" id="cb7-2" title="2">value_acc &lt;-<span class="st"> </span><span class="kw">c</span>(rf_acc<span class="op">*</span><span class="dv">100</span>,naive_acc<span class="op">*</span><span class="dv">100</span>)</a>
<a class="sourceLine" id="cb7-3" title="3">value_kappa&lt;-<span class="st"> </span><span class="kw">c</span>(rf_kappa<span class="op">*</span><span class="dv">100</span>,naive_kappa<span class="op">*</span><span class="dv">100</span>)</a>
<a class="sourceLine" id="cb7-4" title="4">names &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Random Forest&quot;</span>,<span class="st">&quot;Naive Bayes&quot;</span>)</a>
<a class="sourceLine" id="cb7-5" title="5">df_res_kappa &lt;-<span class="st"> </span><span class="kw">data.frame</span>(names,value_kappa)</a>
<a class="sourceLine" id="cb7-6" title="6">df_res_acc&lt;-<span class="st"> </span><span class="kw">data.frame</span>(names,value_acc)</a></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" title="1"><span class="co">#ploting kappa values for both the model</span></a>
<a class="sourceLine" id="cb8-2" title="2">p&lt;-<span class="kw">ggplot</span>(<span class="dt">data=</span>df_res_kappa, <span class="kw">aes</span>(<span class="dt">x=</span>names, <span class="dt">y=</span>value_kappa,<span class="dt">fill=</span>names)) <span class="op">+</span></a>
<a class="sourceLine" id="cb8-3" title="3"><span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">stat=</span><span class="st">&quot;identity&quot;</span>)<span class="op">+</span></a>
<a class="sourceLine" id="cb8-4" title="4"><span class="st">  </span><span class="kw">scale_fill_discrete</span>(<span class="dt">name=</span> <span class="st">&quot;Models&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb8-5" title="5"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span><span class="st">&quot;Names of model&quot;</span>, <span class="dt">y=</span> <span class="st">&quot;Kappa&quot;</span>, <span class="dt">title =</span> <span class="st">&quot;Kappa value of models&quot;</span>)<span class="op">+</span></a>
<a class="sourceLine" id="cb8-6" title="6"><span class="st">  </span><span class="kw">theme</span>(<span class="dt">plot.title =</span> <span class="kw">element_text</span>(<span class="dt">hjust =</span> <span class="fl">0.5</span>), <span class="dt">plot.subtitle =</span> <span class="kw">element_text</span>(<span class="dt">hjust =</span> <span class="fl">0.5</span>),<span class="dt">axis.text.x =</span> <span class="kw">element_text</span>())</a>
<a class="sourceLine" id="cb8-7" title="7">p</a></code></pre></div>
<p><img src="NLP_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" title="1"><span class="co">#ploting the accuracy of both the models</span></a>
<a class="sourceLine" id="cb9-2" title="2">p1 &lt;-<span class="kw">ggplot</span>(<span class="dt">data=</span>df_res_acc, <span class="kw">aes</span>(<span class="dt">x=</span>names, <span class="dt">y=</span>value_acc,<span class="dt">fill=</span>names)) <span class="op">+</span></a>
<a class="sourceLine" id="cb9-3" title="3"><span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">stat=</span><span class="st">&quot;identity&quot;</span>)<span class="op">+</span></a>
<a class="sourceLine" id="cb9-4" title="4"><span class="st">  </span><span class="kw">scale_fill_discrete</span>(<span class="dt">name=</span> <span class="st">&quot;Models&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb9-5" title="5"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span><span class="st">&quot;Names of model&quot;</span>, <span class="dt">y=</span> <span class="st">&quot;Accuracy&quot;</span>, <span class="dt">title =</span> <span class="st">&quot;Accuracy value of models&quot;</span>)<span class="op">+</span></a>
<a class="sourceLine" id="cb9-6" title="6"><span class="st">  </span><span class="kw">theme</span>(<span class="dt">plot.title =</span> <span class="kw">element_text</span>(<span class="dt">hjust =</span> <span class="fl">0.5</span>), <span class="dt">plot.subtitle =</span> <span class="kw">element_text</span>(<span class="dt">hjust =</span> <span class="fl">0.5</span>),<span class="dt">axis.text.x =</span> <span class="kw">element_text</span>())</a>
<a class="sourceLine" id="cb9-7" title="7">p1</a></code></pre></div>
<p><img src="NLP_files/figure-html/unnamed-chunk-10-2.png" width="672" /></p>
<p> </p>
</div>
<div id="tf-idf" class="section level4">
<h4><span class="header">TF-IDF</span></h4>
<p>We also tried supervised modeling, using the same generated Y-label with TF-IDF, which stands for “term frequency-inverse document frequency”.</p>
<p>Here is a brief description how TF-IDF works:</p>
<ol style="list-style-type: decimal">
<li><p>Frequent words in a specific document are most likely to be important to the topic of that document.</p></li>
<li><p>Common words across all documents are most unlikely to be important to any topics.</p></li>
</ol>
<p>A higher weight is assigned to that word i.e., if it’s common in a specific document and also uncommon across all documents.</p>
<p>We selected <strong>Mesa</strong> city of Arizona to perform TF-IDF to generate feature dataset and then apply the same classification models (Naive Bayes &amp; RF trees) as we did to the DTM processed dataset. We show the comparative results below where we found RF trees performing slightly better than Naive bayes when TF-IDF technique is used.</p>
<p> </p>
<center>
<img src="Figs/Mesa_model_comparison_accuracy.jpeg" title="fig:" alt="tfidf acc" />
</center>
<p> </p>
<center>
<img src="Figs/Mesa_model_comparison.jpeg" title="fig:" alt="tfidf kappa" />
</center>
<p> </p>
<p>Due to high computational time complexity, we were not able to apply this to whole dataset and thus don’t use in our final application. But it can be used in future where we can reduce time complexity with adequet hardware resources.</p>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3,h4",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = false;
    options.smoothScroll = false;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
